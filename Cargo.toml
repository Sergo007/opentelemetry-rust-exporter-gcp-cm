[workspace]
members = [".", "examples/basic-metrics"]

[package]
name = "opentelemetry-rust-exporter-gcp-cm"
version = "0.1.0"
description = "OpenTelemetry metrics exporter to google cloud monitoring"
readme = "README.md"
keywords = ["opentelemetry", "metrics", "gcp", "cloud-monitoring"]
license = "Apache-2.0"
edition = "2021"
rust-version = "1.70"

[lib]
doctest = false

[features]
default = ["rt_tokio_opentelemetry_sdk_0_24", "opentelemetry_0_24"]
rt_tokio_opentelemetry_sdk_0_24 = [
    "tokio",
    "opentelemetry_sdk_0_24_pkg/rt-tokio",
]
opentelemetry_0_24 = [
    "opentelemetry_0_24_pkg",
    "opentelemetry_sdk_0_24_pkg",
    "opentelemetry_resourcedetector_gcp_rust_0_11_pkg",
]

rt_tokio_opentelemetry_sdk_0_23 = [
    "tokio",
    "opentelemetry_sdk_0_23_pkg/rt-tokio",
]
opentelemetry_0_23 = [
    "opentelemetry_0_23_pkg",
    "opentelemetry_sdk_0_23_pkg",
    "opentelemetry_resourcedetector_gcp_rust_0_10_pkg",
]

[dependencies]
# opentelemetry = { version = "0.24", features = ["metrics"] }
opentelemetry_0_23_pkg = { package = "opentelemetry", version = "0.23", features = [
    "metrics",
], optional = true }
opentelemetry_0_24_pkg = { package = "opentelemetry", version = "0.24", features = [
    "metrics",
], optional = true }

opentelemetry_sdk_0_23_pkg = { package = "opentelemetry_sdk", version = "0.23", features = [
    "metrics",
], optional = true }
opentelemetry_sdk_0_24_pkg = { package = "opentelemetry_sdk", version = "0.24", features = [
    "metrics",
], optional = true }
opentelemetry_resourcedetector_gcp_rust_0_10_pkg = { package = "opentelemetry_resourcedetector_gcp_rust", version = "0.10", optional = true }
opentelemetry_resourcedetector_gcp_rust_0_11_pkg = { package = "opentelemetry_resourcedetector_gcp_rust", version = "0.11", optional = true }

eventheader = { version = "0.4.0" }
async-trait = "0.1"

# json serializer/deserializer
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
# Google sdk
gcp_auth = "0.12"
# gcloud-sdk = { version = "0.25", features = ["tls-roots", "google-monitoring-v3"] }
prost = "0.13"
prost-types = "0.13"
tonic = { version = "0.12", features = [
    "gzip",
    "tls",
    "tls-roots",
    "transport",
] }

unicode-segmentation = "1.11.0"
tokio = { version = "1.0", features = [
    "fs",
    "io-util",
    "sync",
    "time",
], optional = true }
async-std = { version = "1.10", optional = true }

rand = "0.8.5"
itertools = "0.13.0"

[dependencies.darrentsung_debug_parser]
version = "0.3.1"

[dependencies.hyper]
version = "1"
features = ["client", "http2"]

[dev-dependencies]
once_cell = "1.19.0"
pretty_assertions = "1.4.0"
# todo contribute to the project to add the sorted feature
pretty_assertions_sorted = { git = "https://github.com/Sergo007/rust-pretty-assertions-sorted", branch = "v1_2_7" }
tokio = { version = "1.0", features = ["full"] }
